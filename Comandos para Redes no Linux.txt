github.com/diogobranquinho

Pesquisar Red Gate

Comandos para Redes no Linux

nao rodando node tool?

rodar com ecomercial (&) em background
editor ~/.cassandra/slqhrc

sudo rm -rf /var/lib/cassandra/data/system/*

Cluster MGM

Executar os seguintes comandos:
$chmod +x /etc/init.d/ndb_mgmd
$systemctl enable ndb_mgmd
$systemctl start ndb_mgmd

Cluster - Nós
Executar os seguintes comandos:

$chmod +x /etc/init.d/ndbd
$systemctl enable ndbd
$systemctl start ndbd

Agora para o mysql

$systemctl enable mysql.server
$systemctl start mysql.server

######################################################################################################
Comandos do Cluster NDB
node_id STATUS
Ex: 2 status

node_id start
Ex: 3 start

node_id stop
Ex: 2 stop

ndb_mgm> ALL REPORT MEMORY

######################################################################################################
Trocar Senha. Aplica-se a: Ubuntu
sudo passwd usuario (ou root)

su -
iptables -t filter -nL
cat /etc/services | grep ssh
necessario o protol tcp
iptables - t filter -I INPUT -p - tcp --dport 22 -d (ip)

Liberar porta tcp
Exemplo: firewall-cmd --zone=public --add-port=8080/tcp

######################################################################################################
Debian

mostra o ip e as interfaces ativas
ip link

######################################################################################################
Ubuntu

Verificar a velocidade de resposta do DNS
time dig +short menteb.in @ip-dns

http://[[user][:pass]@]host[:port]/

systemctl list-unit-files
systemctl --failed
systemctl status networking.service
ifconfig en0 | grep status
sudo lshw -class network

Atualizando date timezone para São Paulo (root)
ln -sf /usr/share/zoneinfo/America/Sao_Paulo /etc/localtime

Reconfigurando Timezone
dpkg-reconfigure tzdata

Atualizações
sudo apt-get update
sudo do-release-upgrade

Instalando o openssh-server
sudo apt-get install openssh-server
sudo service ssh start

Baixar uma versão do mysql utilizando o wget
wget https://downloads.mysql.com/archives/get/file/mysql-cluster-gpl-7.3.18-linux-glibc2.12-x86_64.tar.gz

Baixar uma versão do haproxy utilizando o wget
wget http://www.haproxy.org/download/1.9/src/devel/haproxy-1.9-dev6.tar.gz

Executar test para verificar as configurações do MySQL-Cluster
Dentro do diretório /usr/local/mysql/mysql-test/ execute o comando:
perl mysql-test-run.p1

Reset mac address
more or less

(resetar mac address)
rm -rf /etc/udev/rules.d/70-persistent-net.rules

Resetando o tempo de inicialização da VM para 0
sudo nano /etc/systemd/system/network-online.target.wants/networking.service
sudo systemctl daemon-reload

Instalação por meio do repositório de pacotes – Ubuntu 16.04

# Import the public repository GPG keys
curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -

# Register the Microsoft Ubuntu repository
sudo curl -o /etc/apt/sources.list.d/microsoft.list https://packages.microsoft.com/config/ubuntu/16.04/prod.list

# Update the list of products
sudo apt-get update

# Install PowerShell
sudo apt-get install -y powershell

# Start PowerShell
pwsh

Log de Erros
 /var/log/letsencrypt

######################################################################################################
Password do jenkins
b0306841a17d4cdfb785f3b7c1f85242
e327841301074400b24e335fc2f9211d

Reconfigurando gitlab
sudo gitlab-ctl reconfigure

    Remove services
    sudo gitlab-ctl uninstall

    Clean any data generated by usage of the package
    sudo gitlab-ctl cleanse

    You may also want to remove any accounts you configured. To do so
    sudo gitlab-ctl remove-accounts

    Then remove the package using
    sudo dpkg -P gitlab-ce

######################################################################################################
DOCKER
sudo apt-get install docker-ce
docker container ls --all
docker container ls
docker container ls --aq
docker image ls
docker container --help
docker --version
docker version
docker info

sudo systemctl status docker
docker docker-subcommand --help
docker
docker rm $(docker ps -a -q)

apt-get install curl

Instalar Docker
curl -fsSL https://get.docker.com/ | sh

Iniciar o Docker
No Debian: /etc/init.d/docker start
No CentOS: systemctl start docker

Verificar o Status do Docker
systemctl status docker

Configurar o Docker para que seja iniciado com o sistema ou reboot
systemctl enable docker

docker restart container_name or container_id -t
docker images -a
docker rmi Image image
docker system prune -a
docker system prune

Ver se o Docker  está rodando
ps -ef | grep docker

Executar o container em modo daemon (segundo plano)
docker container run -d 

docker ps -a -f status=exited -f status=created

Visualizar os processos
ps -ef

Visualizar todos os processos de um unico container
docker exec container_id ps -ef

Remove a Container
docker rm /container_name

Parar o container
docker stop container_id

docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
docker run -it --rm -p 8080:8080 robsoncartes/tomcat:version8.5
docker run -it --rm -p 8080:8080 jenkins:latest
docker run -it --rm -p 8080:8080 vuejs

Liberar porta tcp
Exemplo: firewall-cmd --zone=public --add-port=8080/tcp

netstat -atunp

Entrar dentro do container
docker attach container_id

Exibe onome e o diretório dos arquivos modificados desde a criação do container
docker diff container_id

Verificar a versão do kernel do sistema operacional hospedeiro
uname -r ou uname -a

Password jenkins
5390432059de4a049b6f940234022e70

jenkins blueocean
ce5134f345844d9d80a2c5fff60ee9b1
######################################################################################################

SYSDIG - DOCKER

Instalar SYSDIG
curl -s https://s3.amazonaws.com/download.draios.com/stable/install-sysdig | sudo bash


Listar os containers existentes
sysdig -c lscontainers

Top Containers por utilização de CPU
sysdig -c topcontainers_cpu

Top Process by containers
sysdig -pc -c topprocs_cpu

por container id ou container_nome
sysdig -pc -c topprocs_cpu container.name contains wordpress

Listar utilização de rede por container
sysdig -pc -c topcontainers_net

Listar processos de cada container que estão utilizando mais rede
sysdig -pc -c topprocs_net

Quais portas estão trafegando mais rede
sysdig -pc -c topconns

Filtrando por nome de containers
sysdig -pc -c topconns container name="nome_container"

Visualizar containers que tem maior I/O
sysdig -c topcontainers_file

Top containers que mais estão lidos ou escritos
sysdig -pc -c topfiles_bytes


######################################################################################################
CENTOS
Listando Usuários awk command
awk -F':' '{ print $1}' /etc/passwd

utilizando usermod para adicionar usuario ao grupo wheel.
usermod -aG wheel nome_usuario

Verificando o conteúdo do diretório /root
sudo ls -la /root

Moficicar propriedades de Rede
vi /etc/sysconfig/network

Atualização manual de pacotes
su -c 'yum update' ou yum update

Atualização Automatica de Pacotes
su -c '/sbin/chkconfig --level 345 yum on; /sbin/service yum start'

Diretório de Configurações de Interface de Redes e Ips
cd /etc/sysconfig/network-scripts/

Ver status ou start ou stop ou restart da interfaces de rede
systemctl [status | start | stop | restart] network.service

Adicionando um novo usuário
adduser new_user
passwd new_user

Visualizando e modificando os privilégios do usuário
visudo
no grupo de root
root ALL = (ALL) ALL
%wheel  ALL=(ALL)       ALL
aluno   ALL=(ALL)       ALL

Instalar um pacote
yum install nome_do_pacote -y
Exemplo: yum install haproxy -y
Obs.: o parametro -y é opcional. Ele indica que todas as dependências necessárias para a instalação do pacote serão instaladas sem que seja pedido a confirmação.

Remover um pacote
yum remove nome_do_pacote
Exemplo: yum remove haproxy

dig @ip_number domain
Exemplo: dig@192.168.0.100 release.solutions

Versão do Sistema Operacional
hostnamectl

Print de detalhes do Sistema
cat /etc/*elease
rpm --eval '%{centos_ver}'

Gerando uma chave SSH RSA de 4096
ssh-keygen -o -t rsa -b 4096 -C "email@example.com"

Copiando a chave para o clipboard
cat ~/.ssh/id_ed25519.pub | clip

######################################################################################################

Ip da maquina de Lab de Projeto de Banco
172.16.4.50
192.168.0.180